<% layout("/layouts/boilerplate.ejs") %>
<div class="container mt-2">
   <!-- Bootstrap Loader -->
   <div id="loader" class="d-flex justify-content-center mt-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1">
    <% if (posts.length > 0) { %>
      <% for (post of posts) { %>
        <div class="card mb-2">
          <a href="/posts/<%= post._id %>">
            <img src="<%= post.img.url %>" class="card-img-top img-fluid" alt="img" style="height:16rem">
            <div class="card-body">
              <h5 class="card-title"><%= post.title %></h5>
              <p class="card-text"><%= post.category %></p>
            </div>
            <div class="card-footer">
              <small class="text-body-secondary">Last updated <%= post.updatedAt.toLocaleTimeString("en-US") %></small>
            </div>
          </a>
        </div>
      <% } %>
    <% } else { %>
      <div class="container mt-5">
        <div class="mt-3">
        
        <h3 class="page-notfound text-center">Oops....Post Not Found!</h3>
        
        </div>
    </div>
    <% } %>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    setTimeout(() => {
      document.getElementById("loader").classList.add("d-none"); // Hide loader
      document.getElementById("postContainer").classList.remove("d-none"); // Show posts
    }, 100); // Simulate loading delay
  });
</script>